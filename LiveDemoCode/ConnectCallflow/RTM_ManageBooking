{"Version":"2019-10-30","StartAction":"42e701ec-1bbf-4ced-8e95-32e316135bc9","Metadata":{"entryPointPosition":{"x":40,"y":40},"ActionMetadata":{"b2be894d-e513-47b1-a468-fa425230137e":{"position":{"x":296.8,"y":619.2}},"42e701ec-1bbf-4ced-8e95-32e316135bc9":{"position":{"x":310.4,"y":138.4},"useLexBotDropdown":true,"conditionMetadata":[{"id":"86f72934-9412-4a8a-9d23-c8944b3e830c","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"AskEmail"}]},"bfa78ca0-09af-4d0b-90af-5bf2b7f89e69":{"position":{"x":290.4,"y":402.4}},"ebf68ff4-6615-4a0a-81e4-5cb5cfd582a7":{"position":{"x":800,"y":852.8}},"2c0083f2-86a0-4b8a-81a2-23622c26cd13":{"position":{"x":796.8,"y":1084.8},"parameters":{"QueueId":{"displayName":"BasicQueue"}},"queue":{"text":"BasicQueue"}},"d887c092-5546-4391-b0bf-b8495989799b":{"position":{"x":1064.8,"y":1100.8}},"9cdf2087-1d6c-4b34-9fad-791be746aac0":{"position":{"x":1049.6,"y":865.6}},"811f309b-04ac-442b-9bc3-3693523d6612":{"position":{"x":1985.6,"y":422.4},"parameters":{"Attributes":{"DepDate":{"useDynamic":true}}},"dynamicParams":["DepDate"]},"ae701aff-2331-4144-b239-8f4d4f7dc1e1":{"position":{"x":1712.8,"y":878.4}},"17fd540e-acd9-4447-bdf8-8d5ba4cc718a":{"position":{"x":1706.4,"y":661.6}},"d3f2b297-05b8-4dbe-82f6-c2b2e5d0eeea":{"position":{"x":600.8,"y":150.4},"parameters":{"Attributes":{"Email":{"useDynamic":true}}},"dynamicParams":["Email"]},"da93881c-5faf-45b0-8962-61b7ae0ab1a7":{"position":{"x":948,"y":628}},"50d216d6-5b11-4a61-a452-50c15dc19069":{"position":{"x":951.2,"y":437.6}},"b37b9005-b774-4677-bb18-f77ef88d16bc":{"position":{"x":1696.8,"y":417.6},"useLexBotDropdown":true,"conditionMetadata":[{"id":"ad68a1f7-1189-4b15-af80-3e3a7ddc12ca","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"AskDate"}]},"0c1fd4ce-955b-443f-b0f5-d23df4c80041":{"position":{"x":1388,"y":618.4}},"a9bfe3ca-0e9c-47f5-aca3-fb117fcf6033":{"position":{"x":1381.6,"y":401.6}},"3c632e17-970c-4a1a-9ec2-a8160e1d253a":{"position":{"x":961.6,"y":147.2},"useLexBotDropdown":true,"conditionMetadata":[{"id":"4fd023c6-14d6-4041-8a3e-6360f9d8e047","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"CancelFlight"},{"id":"15670215-24dc-429a-ba8f-de5b1380b618","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"ChangeFlight"}]},"61285fbc-450b-466a-8194-874ea048f4b5":{"position":{"x":1401.6,"y":137.6},"useLexBotDropdown":true,"conditionMetadata":[{"id":"935f6e9f-cc80-4b77-a1ba-6915471f7e41","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"AskMobileNumber"}]},"a98c7ab6-462b-440b-9da5-247eef08e5ce":{"position":{"x":2296.8,"y":416}},"e2f43974-550c-4708-bee4-b4e406e58944":{"position":{"x":1692,"y":149.6},"parameters":{"Attributes":{"MobileNumber":{"useDynamic":true}}},"dynamicParams":["MobileNumber"]},"0a5d1e03-ecfa-47a8-876d-d78d60384ec9":{"position":{"x":2723.2,"y":134.4}},"9d4ef58b-51a4-4d9c-b635-68c44a8fc103":{"position":{"x":1997.6,"y":130.4}},"ac081681-41e6-4d6f-aa45-cbb445077acf":{"position":{"x":2366.4,"y":136.8},"parameters":{"LambdaFunctionARN":{"displayName":"SendEail"}},"dynamicMetadata":{}}},"Annotations":[],"name":"RTM_ManageBooking","description":"","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{"Text":"Sorry, I didn't get that, Please try again."},"Identifier":"b2be894d-e513-47b1-a468-fa425230137e","Type":"MessageParticipant","Transitions":{"NextAction":"42e701ec-1bbf-4ced-8e95-32e316135bc9","Errors":[{"NextAction":"42e701ec-1bbf-4ced-8e95-32e316135bc9","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":" Please provide your email address.","LexBot":{"Name":"RTIM_MainMenu","Region":"eu-west-2","Alias":"$LATEST"}},"Identifier":"42e701ec-1bbf-4ced-8e95-32e316135bc9","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"bfa78ca0-09af-4d0b-90af-5bf2b7f89e69","Conditions":[{"NextAction":"d3f2b297-05b8-4dbe-82f6-c2b2e5d0eeea","Condition":{"Operator":"Equals","Operands":["AskEmail"]}}],"Errors":[{"NextAction":"bfa78ca0-09af-4d0b-90af-5bf2b7f89e69","ErrorType":"NoMatchingCondition"},{"NextAction":"bfa78ca0-09af-4d0b-90af-5bf2b7f89e69","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"2"},"Identifier":"bfa78ca0-09af-4d0b-90af-5bf2b7f89e69","Type":"Loop","Transitions":{"NextAction":"ebf68ff4-6615-4a0a-81e4-5cb5cfd582a7","Conditions":[{"NextAction":"b2be894d-e513-47b1-a468-fa425230137e","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"ebf68ff4-6615-4a0a-81e4-5cb5cfd582a7","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"Text":"Sorry, you have exceeded the maximum try. Let me transfer you to an agent."},"Identifier":"ebf68ff4-6615-4a0a-81e4-5cb5cfd582a7","Type":"MessageParticipant","Transitions":{"NextAction":"2c0083f2-86a0-4b8a-81a2-23622c26cd13","Errors":[{"NextAction":"2c0083f2-86a0-4b8a-81a2-23622c26cd13","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"arn:aws:connect:eu-west-2:375979126409:instance/9cc5ff90-c5c7-4600-9df5-415d116fc054/queue/1ca28c27-c952-4a3b-a305-7b45ba69542e"},"Identifier":"2c0083f2-86a0-4b8a-81a2-23622c26cd13","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"9cdf2087-1d6c-4b34-9fad-791be746aac0","Errors":[{"NextAction":"9cdf2087-1d6c-4b34-9fad-791be746aac0","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"d887c092-5546-4391-b0bf-b8495989799b","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{},"Identifier":"9cdf2087-1d6c-4b34-9fad-791be746aac0","Type":"TransferContactToQueue","Transitions":{"NextAction":"d887c092-5546-4391-b0bf-b8495989799b","Errors":[{"NextAction":"d887c092-5546-4391-b0bf-b8495989799b","ErrorType":"QueueAtCapacity"},{"NextAction":"d887c092-5546-4391-b0bf-b8495989799b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"DepDate":"$.Lex.Slots.Date"},"TargetContact":"Current"},"Identifier":"811f309b-04ac-442b-9bc3-3693523d6612","Type":"UpdateContactAttributes","Transitions":{"NextAction":"a98c7ab6-462b-440b-9da5-247eef08e5ce","Errors":[{"NextAction":"a98c7ab6-462b-440b-9da5-247eef08e5ce","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Sorry, I didn't get that, Please try again."},"Identifier":"ae701aff-2331-4144-b239-8f4d4f7dc1e1","Type":"MessageParticipant","Transitions":{"NextAction":"b37b9005-b774-4677-bb18-f77ef88d16bc","Errors":[{"NextAction":"b37b9005-b774-4677-bb18-f77ef88d16bc","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"2"},"Identifier":"17fd540e-acd9-4447-bdf8-8d5ba4cc718a","Type":"Loop","Transitions":{"NextAction":"ebf68ff4-6615-4a0a-81e4-5cb5cfd582a7","Conditions":[{"NextAction":"ae701aff-2331-4144-b239-8f4d4f7dc1e1","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"ebf68ff4-6615-4a0a-81e4-5cb5cfd582a7","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"Attributes":{"Email":"$.Lex.Slots.Email"},"TargetContact":"Current"},"Identifier":"d3f2b297-05b8-4dbe-82f6-c2b2e5d0eeea","Type":"UpdateContactAttributes","Transitions":{"NextAction":"3c632e17-970c-4a1a-9ec2-a8160e1d253a","Errors":[{"NextAction":"3c632e17-970c-4a1a-9ec2-a8160e1d253a","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Sorry, I didn't get that, Please try again."},"Identifier":"da93881c-5faf-45b0-8962-61b7ae0ab1a7","Type":"MessageParticipant","Transitions":{"NextAction":"3c632e17-970c-4a1a-9ec2-a8160e1d253a","Errors":[{"NextAction":"3c632e17-970c-4a1a-9ec2-a8160e1d253a","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"2"},"Identifier":"50d216d6-5b11-4a61-a452-50c15dc19069","Type":"Loop","Transitions":{"NextAction":"ebf68ff4-6615-4a0a-81e4-5cb5cfd582a7","Conditions":[{"NextAction":"da93881c-5faf-45b0-8962-61b7ae0ab1a7","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"ebf68ff4-6615-4a0a-81e4-5cb5cfd582a7","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"Text":"Sure, what will be the new departure date","LexBot":{"Name":"RTIM_MainMenu","Region":"eu-west-2","Alias":"$LATEST"}},"Identifier":"b37b9005-b774-4677-bb18-f77ef88d16bc","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"17fd540e-acd9-4447-bdf8-8d5ba4cc718a","Conditions":[{"NextAction":"811f309b-04ac-442b-9bc3-3693523d6612","Condition":{"Operator":"Equals","Operands":["AskDate"]}}],"Errors":[{"NextAction":"17fd540e-acd9-4447-bdf8-8d5ba4cc718a","ErrorType":"NoMatchingCondition"},{"NextAction":"17fd540e-acd9-4447-bdf8-8d5ba4cc718a","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Sorry, I didn't get that, Please try again."},"Identifier":"0c1fd4ce-955b-443f-b0f5-d23df4c80041","Type":"MessageParticipant","Transitions":{"NextAction":"61285fbc-450b-466a-8194-874ea048f4b5","Errors":[{"NextAction":"61285fbc-450b-466a-8194-874ea048f4b5","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"2"},"Identifier":"a9bfe3ca-0e9c-47f5-aca3-fb117fcf6033","Type":"Loop","Transitions":{"NextAction":"ebf68ff4-6615-4a0a-81e4-5cb5cfd582a7","Conditions":[{"NextAction":"0c1fd4ce-955b-443f-b0f5-d23df4c80041","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"ebf68ff4-6615-4a0a-81e4-5cb5cfd582a7","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"Text":"Okay, Now please provide your PNR number","LexBot":{"Name":"YesandNo","Region":"eu-west-2","Alias":"$LATEST"}},"Identifier":"3c632e17-970c-4a1a-9ec2-a8160e1d253a","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"50d216d6-5b11-4a61-a452-50c15dc19069","Conditions":[{"NextAction":"61285fbc-450b-466a-8194-874ea048f4b5","Condition":{"Operator":"Equals","Operands":["CancelFlight"]}},{"NextAction":"b37b9005-b774-4677-bb18-f77ef88d16bc","Condition":{"Operator":"Equals","Operands":["ChangeFlight"]}}],"Errors":[{"NextAction":"50d216d6-5b11-4a61-a452-50c15dc19069","ErrorType":"NoMatchingCondition"},{"NextAction":"50d216d6-5b11-4a61-a452-50c15dc19069","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"To assist you with cancel a booking, please provide your 10 digit mobile number.","LexBot":{"Name":"test","Region":"eu-west-2","Alias":"$LATEST"}},"Identifier":"61285fbc-450b-466a-8194-874ea048f4b5","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"a9bfe3ca-0e9c-47f5-aca3-fb117fcf6033","Conditions":[{"NextAction":"e2f43974-550c-4708-bee4-b4e406e58944","Condition":{"Operator":"Equals","Operands":["AskMobileNumber"]}}],"Errors":[{"NextAction":"a9bfe3ca-0e9c-47f5-aca3-fb117fcf6033","ErrorType":"NoMatchingCondition"},{"NextAction":"a9bfe3ca-0e9c-47f5-aca3-fb117fcf6033","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Your request for change date to $.Attributes.Date has been registered. You will recieved an update in the registered mobile number and email within next 30 min.\n\nThank you for contacting us."},"Identifier":"a98c7ab6-462b-440b-9da5-247eef08e5ce","Type":"MessageParticipant","Transitions":{"NextAction":"0a5d1e03-ecfa-47a8-876d-d78d60384ec9","Errors":[{"NextAction":"0a5d1e03-ecfa-47a8-876d-d78d60384ec9","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"MobileNumber":"$.Lex.Slots.Mobile"},"TargetContact":"Current"},"Identifier":"e2f43974-550c-4708-bee4-b4e406e58944","Type":"UpdateContactAttributes","Transitions":{"NextAction":"9d4ef58b-51a4-4d9c-b635-68c44a8fc103","Errors":[{"NextAction":"9d4ef58b-51a4-4d9c-b635-68c44a8fc103","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"0a5d1e03-ecfa-47a8-876d-d78d60384ec9","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"Text":"Your request for cancellation has been registered. You will received the update in the registered mobile number and email within next 30 min.\n\nThank you for contacting us."},"Identifier":"9d4ef58b-51a4-4d9c-b635-68c44a8fc103","Type":"MessageParticipant","Transitions":{"NextAction":"ac081681-41e6-4d6f-aa45-cbb445077acf","Errors":[{"NextAction":"ac081681-41e6-4d6f-aa45-cbb445077acf","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:eu-west-2:375979126409:function:SendEail","InvocationTimeLimitSeconds":"3","ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"ac081681-41e6-4d6f-aa45-cbb445077acf","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"0a5d1e03-ecfa-47a8-876d-d78d60384ec9","Errors":[{"NextAction":"0a5d1e03-ecfa-47a8-876d-d78d60384ec9","ErrorType":"NoMatchingError"}]}}]}