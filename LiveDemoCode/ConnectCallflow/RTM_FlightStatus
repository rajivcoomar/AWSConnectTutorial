{"Version":"2019-10-30","StartAction":"e63b7f3e-6ead-456a-bc2a-02c77c86cbee","Metadata":{"entryPointPosition":{"x":40,"y":40},"ActionMetadata":{"ffdb7eba-bc53-45f8-8e8b-23417283c1ee":{"position":{"x":694.4,"y":796}},"108c10a4-f667-48f6-b9cb-b362fc1eba9a":{"position":{"x":992.8,"y":808},"parameters":{"QueueId":{"displayName":"General"}},"queue":{"text":"General"}},"175c1436-5b4d-486d-8e10-6eef31fb46e4":{"position":{"x":1223.2,"y":805.6}},"bbaf35f3-eeb1-4ba3-800e-81bb4819befe":{"position":{"x":1477.6,"y":803.2}},"14e18ae3-d9c6-4b51-a43c-bb22a91129d7":{"position":{"x":1566.4,"y":196.8}},"febf3b7f-65fa-4405-b3b2-8ac3fa5477ac":{"position":{"x":864,"y":338.4},"parameters":{"Attributes":{"StatusMsg":{"useDynamic":true}}},"dynamicParams":["StatusMsg"]},"b03c62c3-7deb-41b7-b16e-d4222b154693":{"position":{"x":1196,"y":148.8}},"7c53a3b6-69e0-4f6b-acbd-f8e0cac57788":{"position":{"x":862.4,"y":106.4},"parameters":{"LambdaFunctionARN":{"displayName":"CallAirlineApi"},"LambdaInvocationAttributes":{"FlightNumber":{"useDynamic":true}}},"dynamicMetadata":{"FlightNumber":true}},"df16d9ec-b815-4014-ab4e-309e361a5e36":{"position":{"x":246.4,"y":451.2}},"5c1a0359-8a18-42dc-97c7-21c0aa76db3e":{"position":{"x":244,"y":661.6}},"9bb97f1d-62e2-4b7c-9db1-3b4adfa9be2d":{"position":{"x":554.4,"y":120.8},"parameters":{"Attributes":{"FlightNumber":{"useDynamic":true}}},"dynamicParams":["FlightNumber"]},"e63b7f3e-6ead-456a-bc2a-02c77c86cbee":{"position":{"x":195.2,"y":123.2},"useLexBotDropdown":true,"conditionMetadata":[{"id":"6a07772e-fb2c-457e-aaf8-61a0bf256fb1","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"AskFlightNumber"}]}},"Annotations":[],"name":"RTM_FlightStatus","description":"","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{"Text":"Sorry, you have exceeded the maximum try. Let me transfer you to an agent."},"Identifier":"ffdb7eba-bc53-45f8-8e8b-23417283c1ee","Type":"MessageParticipant","Transitions":{"NextAction":"108c10a4-f667-48f6-b9cb-b362fc1eba9a","Errors":[{"NextAction":"108c10a4-f667-48f6-b9cb-b362fc1eba9a","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"arn:aws:connect:eu-west-2:375979126409:instance/9cc5ff90-c5c7-4600-9df5-415d116fc054/queue/a7ccb227-830c-4484-b40d-12b3b5b86a9a"},"Identifier":"108c10a4-f667-48f6-b9cb-b362fc1eba9a","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"175c1436-5b4d-486d-8e10-6eef31fb46e4","Errors":[{"NextAction":"175c1436-5b4d-486d-8e10-6eef31fb46e4","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"175c1436-5b4d-486d-8e10-6eef31fb46e4","Type":"TransferContactToQueue","Transitions":{"NextAction":"bbaf35f3-eeb1-4ba3-800e-81bb4819befe","Errors":[{"NextAction":"bbaf35f3-eeb1-4ba3-800e-81bb4819befe","ErrorType":"QueueAtCapacity"},{"NextAction":"bbaf35f3-eeb1-4ba3-800e-81bb4819befe","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"bbaf35f3-eeb1-4ba3-800e-81bb4819befe","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{},"Identifier":"14e18ae3-d9c6-4b51-a43c-bb22a91129d7","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"Attributes":{"StatusMsg":"$.External.msgString"},"TargetContact":"Current"},"Identifier":"febf3b7f-65fa-4405-b3b2-8ac3fa5477ac","Type":"UpdateContactAttributes","Transitions":{"NextAction":"b03c62c3-7deb-41b7-b16e-d4222b154693","Errors":[{"NextAction":"b03c62c3-7deb-41b7-b16e-d4222b154693","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"$.Attributes.StatusMsg"},"Identifier":"b03c62c3-7deb-41b7-b16e-d4222b154693","Type":"MessageParticipant","Transitions":{"NextAction":"14e18ae3-d9c6-4b51-a43c-bb22a91129d7","Errors":[{"NextAction":"14e18ae3-d9c6-4b51-a43c-bb22a91129d7","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:eu-west-2:375979126409:function:CallAirlineApi","InvocationTimeLimitSeconds":"3","LambdaInvocationAttributes":{"FlightNumber":"$.Attributes.FlightNumber"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"7c53a3b6-69e0-4f6b-acbd-f8e0cac57788","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"febf3b7f-65fa-4405-b3b2-8ac3fa5477ac","Errors":[{"NextAction":"febf3b7f-65fa-4405-b3b2-8ac3fa5477ac","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"2"},"Identifier":"df16d9ec-b815-4014-ab4e-309e361a5e36","Type":"Loop","Transitions":{"NextAction":"ffdb7eba-bc53-45f8-8e8b-23417283c1ee","Conditions":[{"NextAction":"5c1a0359-8a18-42dc-97c7-21c0aa76db3e","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"ffdb7eba-bc53-45f8-8e8b-23417283c1ee","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"Text":"Sorry, I didn't get that, Please try again."},"Identifier":"5c1a0359-8a18-42dc-97c7-21c0aa76db3e","Type":"MessageParticipant","Transitions":{"NextAction":"e63b7f3e-6ead-456a-bc2a-02c77c86cbee","Errors":[{"NextAction":"e63b7f3e-6ead-456a-bc2a-02c77c86cbee","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"FlightNumber":"$.Lex.Slots.FlightNumber"},"TargetContact":"Current"},"Identifier":"9bb97f1d-62e2-4b7c-9db1-3b4adfa9be2d","Type":"UpdateContactAttributes","Transitions":{"NextAction":"7c53a3b6-69e0-4f6b-acbd-f8e0cac57788","Errors":[{"NextAction":"7c53a3b6-69e0-4f6b-acbd-f8e0cac57788","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Sure, I can assist with flight status.\nPlease enter the flight number present in the ticket. For example : 6E6359","LexBot":{"Name":"AskFlightNumber","Region":"eu-west-2","Alias":"$LATEST"}},"Identifier":"e63b7f3e-6ead-456a-bc2a-02c77c86cbee","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"df16d9ec-b815-4014-ab4e-309e361a5e36","Conditions":[{"NextAction":"9bb97f1d-62e2-4b7c-9db1-3b4adfa9be2d","Condition":{"Operator":"Equals","Operands":["AskFlightNumber"]}}],"Errors":[{"NextAction":"df16d9ec-b815-4014-ab4e-309e361a5e36","ErrorType":"NoMatchingCondition"},{"NextAction":"df16d9ec-b815-4014-ab4e-309e361a5e36","ErrorType":"NoMatchingError"}]}}]}